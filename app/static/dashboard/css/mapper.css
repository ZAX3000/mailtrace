/* ===== Column Mapper Modal (scoped) ===== */
#mtMapperOverlay {
  position: fixed; inset: 0; background: rgba(5,12,20,.55);
  display: none; align-items: center; justify-content: center; z-index: 9999;
}
#mtMapperModal {
  background: #0f172a; color: #e5eef9; border: 1px solid rgba(255,255,255,.06);
  border-radius: 16px; width: min(980px, 94vw); max-height: 86vh; overflow: auto;
  box-shadow: 0 24px 80px rgba(0,0,0,.4);
}
#mtMapperModal header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 18px; border-bottom: 1px solid rgba(255,255,255,.06);
  position: sticky; top: 0; background: #0f172a;
}
#mtMapperModal header h3 { margin: 0; font-size: 18px; }
#mtMapperModal .body { padding: 16px 18px; }
#mtMapperModal .grid { display: grid; grid-template-columns: 1.2fr 1.2fr; gap: 14px 20px; }
#mtMapperModal .col {
  background: #0b1220; border: 1px solid rgba(255,255,255,.05);
  border-radius: 12px; padding: 12px;
}
#mtMapperModal .col h4 { margin: .2rem 0 .6rem; font-size: 14px; opacity: .9; }
#mtMapperModal .row {
  display: grid; grid-template-columns: 1.1fr 1.6fr; gap: 10px; align-items: center;
  padding: 6px 0; border-bottom: 1px dashed rgba(255,255,255,.06);
}
#mtMapperModal .row:last-child { border-bottom: none; }
#mtMapperModal label { font-size: 13px; color: #9fb2c8; }
#mtMapperModal select {
  background: #0f172a; color: #e5eef9; border: 1px solid rgba(255,255,255,.12);
  border-radius: 10px; padding: 8px 10px; font-size: 13px;
}
#mtMapperModal .samples { font-size: 12px; opacity: .85; margin-top: 6px; line-height: 1.2; }
#mtMapperModal .req { color: #f4b400; font-size: 12px; margin-left: 6px; }
#mtMapperModal .missing { color: #f87171; font-weight: 600; }
#mtMapperModal footer {
  display: flex; gap: 10px; justify-content: flex-end; padding: 14px 18px;
  border-top: 1px solid rgba(255,255,255,.06); position: sticky; bottom: 0; background: #0f172a;
}
#mtMapperModal .btn {
  background: #1f2937; color: #e5eef9; border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px; padding: .6rem 1rem; font-weight: 700; cursor: pointer;
}
#mtMapperModal .btn.primary { background: #16a34a; border-color: transparent; color: #fff; }
#mtMapperModal .btn.ghost { background: transparent; border-color: rgba(255,255,255,.12); }
#mtMapperHelp { font-size: 12px; color: #9fb2c8; margin: 0 0 10px; }

/* ===== Mapping QA UI ===== */
#mtMapControls { display: flex; gap: .5rem; align-items: center; margin: .5rem 0 0; }
#mtMapControls .linkbtn {
  background: transparent; border: 1px solid rgba(255,255,255,.15);
  padding: .35rem .6rem; border-radius: 10px; cursor: pointer; font-weight: 700;
}
#mtMapControls .linkbtn:hover { background: rgba(255,255,255,.06); }

#mtWarn {
  display: none; margin: .75rem 0; padding: .75rem 1rem; border-radius: 12px;
  border: 1px solid rgba(250,204,21,.2); background: rgba(250,204,21,.08); color: #fde68a;
}
#mtWarn h4 { margin: .2rem 0 .4rem; font-size: 14px; }
#mtWarn ul { margin: .25rem 0 .6rem 1rem; padding: 0; }
#mtWarn li { margin: .15rem 0; font-size: 13px; }
#mtWarn .actions { display: flex; gap: .5rem; }
#mtWarn .actions .btn {
  background: #1f2937; color: #e5eef9; border: 1px solid rgba(255,255,255,.12);
  border-radius: 10px; padding: .45rem .8rem; font-weight: 700; cursor: pointer;
}
#mtWarn .actions .btn.primary { background: #16a34a; color: white; border-color: transparent; }

/* ===== v6/v8 legacy control hides ===== */
#mtMapControls #mtResetMap { display: none !important; }  /* v6 */
#mtMapperAuto { display: none !important; }               /* v8 */

/* ===== v9 popup for missing required mappings ===== */
#mtPopupOverlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.55);
  display: none; align-items: center; justify-content: center; z-index: 10000;
}
#mtPopup {
  background: #111827; color: #f9fafb; border: 1px solid rgba(255,255,255,.12);
  border-radius: 16px; width: min(620px, 92vw);
  box-shadow: 0 20px 70px rgba(0,0,0,.45);
}
#mtPopup header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 18px; border-bottom: 1px solid rgba(255,255,255,.08);
}
#mtPopup header h3 { margin: 0; font-size: 18px; }
#mtPopup .body { padding: 16px 18px; }
#mtPopup .body ul { margin: .25rem 0 .5rem 1rem; padding: 0; }
#mtPopup .body li { margin: .25rem 0; font-size: 14px; }
#mtPopup footer { display: flex; gap: 10px; justify-content: flex-end; padding: 14px 18px; border-top: 1px solid rgba(255,255,255,.08); }
#mtPopup .btn {
  background: #1f2937; color: #e5eef9; border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px; padding: .55rem 1rem; font-weight: 700; cursor: pointer;
}
#mtPopup .btn.primary { background: #dc2626; border-color: transparent; color: #fff; }

/* highlight missing selects */
.mt-missing { outline: 2px solid #dc2626 !important; box-shadow: 0 0 0 3px rgba(220,38,38,.3); }

/* shake animation */
@keyframes mt-shake {
  10%, 90% { transform: translateX(-1px); }
  20%, 80% { transform: translateX(2px); }
  30%, 50%, 70% { transform: translateX(-4px); }
  40%, 60% { transform: translateX(4px); }
}
.mt-shake { animation: mt-shake .45s ease-in-out both; }

/* ===== v11 sticky header/footer fixes for mapper modal ===== */
#mtMapperModal header {
  position: sticky; top: 0; background: #0f172a; z-index: 10;
  box-shadow: 0 1px 0 rgba(255,255,255,.06), 0 8px 18px rgba(0,0,0,.35);
}
#mtMapperModal footer {
  position: sticky; bottom: 0; background: #0f172a; z-index: 10;
  box-shadow: 0 -1px 0 rgba(255,255,255,.06), 0 -8px 18px rgba(0,0,0,.35);
}
/* keep selects visible when scrolled into view */
#mtMapperModal .row select { scroll-margin-top: 76px; }
/* extra body padding so content doesnâ€™t hug sticky areas */
#mtMapperModal .body { padding-top: 18px; padding-bottom: 18px; }